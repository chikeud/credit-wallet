"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.seed = seed;
async function seed(knex) {
    const trx = await knex.transaction();
    try {
        await trx('transactions').delete();
        await trx('transactions').insert([
            // Account 1000000001 - high income, one reversal, one bet
            {
                id: 1,
                amount: 3000000,
                account_number: '1000000001',
                channel: 'BRANCH',
                authorization_token: 'NONE',
                transaction_type: 'CREDIT',
                debit_credit: 'CREDIT',
                narration: 'Business Income',
                reference: 'REF1001',
                transaction_time: '2022-01-05 10:00:00',
                value_date: '2022-01-05',
                balance_after: 3000000,
            },
            {
                id: 2,
                amount: 250000,
                account_number: '1000000001',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'DEBIT',
                debit_credit: 'DEBIT',
                narration: 'Transfer to supplier',
                reference: 'REF1002',
                transaction_time: '2022-01-06 11:00:00',
                value_date: '2022-01-06',
                balance_after: 2750000,
            },
            {
                id: 3,
                amount: 10000,
                account_number: '1000000001',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'DEBIT',
                debit_credit: 'DEBIT',
                narration: 'BetKing Online',
                reference: 'REF1003',
                transaction_time: '2022-01-08 09:00:00',
                value_date: '2022-01-08',
                balance_after: 2740000,
            },
            {
                id: 4,
                amount: 10000,
                account_number: '1000000001',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'REVERSAL',
                debit_credit: 'CREDIT',
                narration: 'Reversal for failed transfer',
                reference: 'REF1004',
                transaction_time: '2022-01-09 10:00:00',
                value_date: '2022-01-09',
                balance_after: 2750000,
            },
            // Account 1000000002 - 2 large cash credits, multiple reversals
            {
                id: 5,
                amount: 600000,
                account_number: '1000000002',
                channel: 'MOBILE',
                authorization_token: 'PIN',
                transaction_type: 'CREDIT',
                debit_credit: 'CREDIT',
                narration: 'Contract Payment',
                reference: 'REF2001',
                transaction_time: '2022-02-01 08:30:00',
                value_date: '2022-02-01',
                balance_after: 600000,
            },
            {
                id: 6,
                amount: 520000,
                account_number: '1000000002',
                channel: 'BRANCH',
                authorization_token: 'NONE',
                transaction_type: 'CREDIT',
                debit_credit: 'CREDIT',
                narration: 'Cash deposit',
                reference: 'REF2002',
                transaction_time: '2022-02-03 14:00:00',
                value_date: '2022-02-03',
                balance_after: 1120000,
            },
            {
                id: 7,
                amount: 100000,
                account_number: '1000000002',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'REVERSAL',
                debit_credit: 'CREDIT',
                narration: 'Reversal for ATM fail',
                reference: 'REF2003',
                transaction_time: '2022-02-04 15:00:00',
                value_date: '2022-02-04',
                balance_after: 1220000,
            },
            {
                id: 8,
                amount: 150000,
                account_number: '1000000002',
                channel: 'ATM',
                authorization_token: 'CARD',
                transaction_type: 'WITHDRAWAL',
                debit_credit: 'DEBIT',
                narration: 'ATM cash out',
                reference: 'REF2004',
                transaction_time: '2022-02-05 16:00:00',
                value_date: '2022-02-05',
                balance_after: 1070000,
            },
            {
                id: 9,
                amount: 50000,
                account_number: '1000000002',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'REVERSAL',
                debit_credit: 'CREDIT',
                narration: 'Reversal for double debit',
                reference: 'REF2005',
                transaction_time: '2022-02-06 10:00:00',
                value_date: '2022-02-06',
                balance_after: 1120000,
            },
            // Account 1000000003 - low income, one gambling
            {
                id: 10,
                amount: 18000,
                account_number: '1000000003',
                channel: 'USSD',
                authorization_token: 'PIN',
                transaction_type: 'CREDIT',
                debit_credit: 'CREDIT',
                narration: 'Gift from friend',
                reference: 'REF3001',
                transaction_time: '2022-03-01 12:00:00',
                value_date: '2022-03-01',
                balance_after: 18000,
            },
            {
                id: 11,
                amount: 1000,
                account_number: '1000000003',
                channel: 'POS',
                authorization_token: 'PIN',
                transaction_type: 'PURCHASE',
                debit_credit: 'DEBIT',
                narration: 'POS Transaction',
                reference: 'REF3002',
                transaction_time: '2022-03-02 13:00:00',
                value_date: '2022-03-02',
                balance_after: 17000,
            },
            {
                id: 12,
                amount: 5000,
                account_number: '1000000003',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'DEBIT',
                debit_credit: 'DEBIT',
                narration: 'Bet9ja',
                reference: 'REF3003',
                transaction_time: '2022-03-03 14:00:00',
                value_date: '2022-03-03',
                balance_after: 12000,
            },
            // Bonus: another mid-tier user
            {
                id: 13,
                amount: 100000,
                account_number: '1000000004',
                channel: 'MOBILE',
                authorization_token: 'PIN',
                transaction_type: 'CREDIT',
                debit_credit: 'CREDIT',
                narration: 'Salary payment',
                reference: 'REF4001',
                transaction_time: '2022-04-01 10:00:00',
                value_date: '2022-04-01',
                balance_after: 100000,
            },
            {
                id: 14,
                amount: 15000,
                account_number: '1000000004',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'DEBIT',
                debit_credit: 'DEBIT',
                narration: 'Food delivery',
                reference: 'REF4002',
                transaction_time: '2022-04-01 12:00:00',
                value_date: '2022-04-01',
                balance_after: 85000,
            },
            {
                id: 15,
                amount: 10000,
                account_number: '1000000004',
                channel: 'WEB',
                authorization_token: 'OTP',
                transaction_type: 'REVERSAL',
                debit_credit: 'CREDIT',
                narration: 'Reversal of failed payment',
                reference: 'REF4003',
                transaction_time: '2022-04-01 14:00:00',
                value_date: '2022-04-01',
                balance_after: 95000,
            }
        ]);
        await trx.commit();
        console.log('Seeding completed successfully.');
    }
    catch (error) {
        console.error('Error during seeding:', error);
        await trx.rollback();
        throw error;
    }
}
